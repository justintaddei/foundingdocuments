{"version":3,"sources":["index.js"],"names":["globalThis","window","global","self","createCommonjsModule","fn","module","exports","debouncedEmit","current","parser","secondParser","observable","enumerable","el","callbacks","slice","Array","prototype","Object","defineProperties","on","value","event","push","writable","configurable","off","cb","arr","i","splice","one","apply","arguments","trigger","fns","arglen","length","args","concat","RE_ORIGIN","EVENT_LISTENER","REMOVE_EVENT_LISTENER","ADD_EVENT_LISTENER","HASHCHANGE","win","doc","document","hist","history","loc","location","ontouchstart","started","routeFound","DEFAULT_PARSER","path","split","DEFAULT_SECOND_PARSER","filter","f","replace","re","autoExec","delay","t","clearTimeout","setTimeout","debounce","emit","MAX_EMIT_STACK_LEVEL","POPSTATE","clickEvent","click","this","central","s","bind","e","emitStackLevel","isString","str","getPathFromRoot","href","getPathFromBase","base","route","_","force","isRoot","emitStack","first","shift","which","metaKey","ctrlKey","shiftKey","target","nodeName","parentNode","HAS_ATTRIBUTE","Router","indexOf","match","title","preventDefault","go","shouldReplace","normalize","replaceState","TRIGGER","prot","m","second","third","r","$","some","action","mainRouter","seek","elem","newSubRouter","getBoundingClientRect","top","pageYOffset","router","behavior","toast","msg","button","USToastElement","create","stop","arg","fn2","query","q","k","v","start","readyState","onreadystatechange","_HTMLElement","_this13","undefined","label","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","call","innerHTML","html","_templateObject","container","querySelector","appendChild","_assertThisInitialized","_delay","addEventListener","remove","_clearTimeout","_setTimeout","_inherits","_wrapNativeSuper","HTMLElement","_createClass","key","_timeout","toString","customElements","get","define","IntersectionObserver","entries","_iteratorNormalCompletion","_didIteratorError","_iteratorError","entry","isIntersecting","err","_iterator","rootMargin","threshold","localStorage","setItem","USConstitutionElement","_HTMLElement2","_continueWhereLastRead","continueWhereLastRead","_asyncToGenerator","regeneratorRuntime","mark","_callee","lastRead","wrap","_context","prev","next","getItem","abrupt","scrollTo","_typeof","createClass","_extends","DOMIterator","Mark$1","Symbol","_typeof2","iterator","obj","constructor","Constructor","instance","TypeError","props","descriptor","offset","readingObserver","defineProperty","protoProps","staticProps","assign","source","hasOwnProperty","ctx","iframes","exclude","iframesTimeout","classCallCheck","filteredCtx","NodeList","isPrototypeOf","isArray","querySelectorAll","isDescendant","contexts","contains","ifr","successFn","errorFn","ifrWin","Error","src","getAttribute","trim","bl","_this","listener","called","tout","isIframeBlank","removeEventListener","getIframeContents","observeIframeLoad","done","_this2","eachCalled","forEachIframe","waitForIframes","handled","each","commonjsGlobal","end","open","checkEnd","forEach","onIframeReady","con","whatToShow","contents","node","prevNode","compCurr","compareDocumentPosition","Node","DOCUMENT_POSITION_PRECEDING","itr","nextNode","currIfr","ifrDict","val","compareNodeIframe","eCb","fCb","_this4","createInstanceOnIframe","eachCb","filterCb","doneCb","_this5","createIterator","elements","retrieveNodes","_getIteratorNode","getIteratorNode","checkIframeFilter","forEachNode","ifrNode","handleOpenIframes","_this6","getContexts","ready","element","selector","selectors","matches","matchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector","webkitMatchesSelector","_this3","every","sel","ua","navigator","Mark","level","opt","log","debug","compPrev","escapeStr","keys","after","createSynonymsRegExp","ignoreJoiners","ignorePunctuation","setupIgnoreJoinersRegExp","diacritics","createDiacriticsRegExp","createMergedBlanksRegExp","createJoinersRegExp","previousNode","createWildcardsRegExp","syn","synonyms","index","k1","wildcards","setupWildcardsRegExp","k2","RegExp","sens","joinerPlaceholder","processSynomyms","charAt","spaces","indx","original","nextChar","test","joiner","join","dct","caseSensitive","ch","acc","accuracy","lsJoin","ls","limiter","iterateThroughNodes","sv","kw","separateWordSearch","kwSplitted","stack","keywords","sort","a","b","Number","parseFloat","array","last","ie","item","_callNoMatchOnInvalid","callNoMatchOnInvalidRanges","valid","range","parseInt","isNumeric","createRegExp","JSON","stringify","noMatch","originalLength","string","max","substring","nodes","NodeFilter","SHOW_TEXT","matchesExclude","FILTER_REJECT","FILTER_ACCEPT","ret","startNode","repl","createElement","setAttribute","className","textContent","replaceChild","dict","n","sibl","startStr","substr","endStr","wrapRangeInTextNode","j","previousSibling","regex","ignoreGroups","endCb","matchIdx","getTextNodes","exec","pos","lastIndex","_this7","getSeparatedKeywords","wrapRangeInMappedTextNode","ranges","_this8","counter","_checkWhitespaceRange","checkWhitespaceRanges","parent","docFrag","nextSibling","nodeType","nodeValue","removeChild","normalizeTextNode","firstChild","regexp","_this9","totalMatches","acrossElements","_this10","_getSeparatedKeywords","kwArrLen","handler","term","kwArr","rawRanges","_this11","checkRanges","hEl","_this12","SHOW_ELEMENT","unwrapMatches","matchesSel","set","_opt","markRegExp","wrapMatchesAcrossElements","unmark","dispatchEvent","CustomEvent","detail","computeIdFromElement","data","tag","parentElement","tagName","computeElementFromId","id","parentElem","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","finalNode","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","childNodes","restoreBookmarkSelectionBounds","bookmark","endNode","createBookmark","selection","getRangeAt","originalData","text","startContainer","startOffset","endContainer","endOffset","endContainerId","time","Date","now","bookmarks","getBookmarks","saveBookmarks","showBookmark","highlightElement","wrapper","insertBefore","hideBookmarkHighlights","dispatchVisibilityChange","is_highlighting_bookmarks","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","h","p","replaceWith","_toConsumableArray","parse","set$$1","removeAllRanges","createRange","console","setStart","setEnd","commonAncestorContainer","markRanges","currElem","splitText","treeWalker","acceptNode","intersectsNode","range1","compareBoundaryPoints","END_TO_START","range0","START_TO_END","rangesIntersect","rangeAroundNode","selectNode","createRangeAroundNode","currentNode","highlight","toggleBookmarkHighlighting","showBookmarkHighlights","dispatchUpdate","classList","add","html$1","String","raw","UsHeaderElement","_HTMLElement3","_this14","hasBookmarks","_ref","bookmarksVisible","_templateObject2","toggle","body","blurSearchIfFocused","search","searchBar","blur","currentFoundFromSearch","totalFoundFromSearch","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","active","_this15","clearHighlight","bookmarkSaveButton","saveBookmark","detectSelection","rangeCount","pStart","pEnd","closest","selecting","lastSelection","empty","searching","total","_this16","_this17","Promise","resolve","marker","_this18","_searchTimeout","_callee2","_context2","requestIdleCallback","dfnPanel","show","hide","otherActive","once","_setText","_callee4","txt","_context4","panel","setText","_x","dfn","UsDfnElement","_HTMLElement4","_show","explanation","_callee3","shouldBeVisible","_context3","sent","html$2","_HTMLElement5","BookmarkPreviewElement","_this19","truncate","_this20","BookmarkManagerElement","_HTMLElement6","_this21","handleClick","buildBookmarksList","bookmarkPreview","destoryBookmarksList","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","preview","handlePreviewClick","scrollToHighlight","article","sectionNumber","articleHeading","amendment","serviceWorker","register","then"],"mappings":"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","file":"../index.js","sourcesContent":["(function () {\n\t'use strict';\n\n\tvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\tfunction createCommonjsModule(fn, module) {\n\t\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n\t}\n\n\tvar observable = createCommonjsModule(function (module, exports) {\n\t(function(window, undefined$1) {var observable = function(el) {\n\n\t  /**\n\t   * Extend the original object or create a new empty one\n\t   * @type { Object }\n\t   */\n\n\t  el = el || {};\n\n\t  /**\n\t   * Private variables\n\t   */\n\t  var callbacks = {},\n\t    slice = Array.prototype.slice;\n\n\t  /**\n\t   * Public Api\n\t   */\n\n\t  // extend the el object adding the observable methods\n\t  Object.defineProperties(el, {\n\t    /**\n\t     * Listen to the given `event` ands\n\t     * execute the `callback` each time an event is triggered.\n\t     * @param  { String } event - event id\n\t     * @param  { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    on: {\n\t      value: function(event, fn) {\n\t        if (typeof fn == 'function')\n\t          (callbacks[event] = callbacks[event] || []).push(fn);\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\n\t    /**\n\t     * Removes the given `event` listeners\n\t     * @param   { String } event - event id\n\t     * @param   { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    off: {\n\t      value: function(event, fn) {\n\t        if (event == '*' && !fn) callbacks = {};\n\t        else {\n\t          if (fn) {\n\t            var arr = callbacks[event];\n\t            for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n\t              if (cb == fn) arr.splice(i--, 1);\n\t            }\n\t          } else delete callbacks[event];\n\t        }\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\n\t    /**\n\t     * Listen to the given `event` and\n\t     * execute the `callback` at most once\n\t     * @param   { String } event - event id\n\t     * @param   { Function } fn - callback function\n\t     * @returns { Object } el\n\t     */\n\t    one: {\n\t      value: function(event, fn) {\n\t        function on() {\n\t          el.off(event, on);\n\t          fn.apply(el, arguments);\n\t        }\n\t        return el.on(event, on)\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    },\n\n\t    /**\n\t     * Execute all callback functions that listen to\n\t     * the given `event`\n\t     * @param   { String } event - event id\n\t     * @returns { Object } el\n\t     */\n\t    trigger: {\n\t      value: function(event) {\n\n\t        // getting the arguments\n\t        var arglen = arguments.length - 1,\n\t          args = new Array(arglen),\n\t          fns,\n\t          fn,\n\t          i;\n\n\t        for (i = 0; i < arglen; i++) {\n\t          args[i] = arguments[i + 1]; // skip first argument\n\t        }\n\n\t        fns = slice.call(callbacks[event] || [], 0);\n\n\t        for (i = 0; fn = fns[i]; ++i) {\n\t          fn.apply(el, args);\n\t        }\n\n\t        if (callbacks['*'] && event != '*')\n\t          el.trigger.apply(el, ['*', event].concat(args));\n\n\t        return el\n\t      },\n\t      enumerable: false,\n\t      writable: false,\n\t      configurable: false\n\t    }\n\t  });\n\n\t  return el\n\n\t};\n\t  /* istanbul ignore next */\n\t  // support CommonJS, AMD & browser\n\t  module.exports = observable;\n\n\t})(typeof window != 'undefined' ? window : undefined);\n\t});\n\n\t/**\n\t * Simple client-side router\n\t * @module riot-route\n\t */\n\n\tvar RE_ORIGIN = /^.+?\\/\\/+[^/]+/,\n\t  EVENT_LISTENER = 'EventListener',\n\t  REMOVE_EVENT_LISTENER = 'remove' + EVENT_LISTENER,\n\t  ADD_EVENT_LISTENER = 'add' + EVENT_LISTENER,\n\t  HAS_ATTRIBUTE = 'hasAttribute',\n\t  POPSTATE = 'popstate',\n\t  HASHCHANGE = 'hashchange',\n\t  TRIGGER = 'trigger',\n\t  MAX_EMIT_STACK_LEVEL = 3,\n\t  win = typeof window != 'undefined' && window,\n\t  doc = typeof document != 'undefined' && document,\n\t  hist = win && history,\n\t  loc = win && (hist.location || win.location), // see html5-history-api\n\t  prot = Router.prototype, // to minify more\n\t  clickEvent = doc && doc.ontouchstart ? 'touchstart' : 'click',\n\t  central = observable();\n\n\tvar\n\t  started = false,\n\t  routeFound = false,\n\t  debouncedEmit,\n\t  current,\n\t  parser,\n\t  secondParser,\n\t  emitStack = [],\n\t  emitStackLevel = 0;\n\n\t/**\n\t * Default parser. You can replace it via router.parser method.\n\t * @param {string} path - current path (normalized)\n\t * @returns {array} array\n\t */\n\tfunction DEFAULT_PARSER(path) {\n\t  return path.split(/[/?#]/)\n\t}\n\n\t/**\n\t * Default parser (second). You can replace it via router.parser method.\n\t * @param {string} path - current path (normalized)\n\t * @param {string} filter - filter string (normalized)\n\t * @returns {array} array\n\t */\n\tfunction DEFAULT_SECOND_PARSER(path, filter) {\n\t  var f = filter\n\t    .replace(/\\?/g, '\\\\?')\n\t    .replace(/\\*/g, '([^/?#]+?)')\n\t    .replace(/\\.\\./, '.*');\n\t  var re = new RegExp((\"^\" + f + \"$\"));\n\t  var args = path.match(re);\n\n\t  if (args) { return args.slice(1) }\n\t}\n\n\t/**\n\t * Simple/cheap debounce implementation\n\t * @param   {function} fn - callback\n\t * @param   {number} delay - delay in seconds\n\t * @returns {function} debounced function\n\t */\n\tfunction debounce(fn, delay) {\n\t  var t;\n\t  return function () {\n\t    clearTimeout(t);\n\t    t = setTimeout(fn, delay);\n\t  }\n\t}\n\n\t/**\n\t * Set the window listeners to trigger the routes\n\t * @param {boolean} autoExec - see route.start\n\t */\n\tfunction start(autoExec) {\n\t  debouncedEmit = debounce(emit, 1);\n\t  win[ADD_EVENT_LISTENER](POPSTATE, debouncedEmit);\n\t  win[ADD_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n\t  doc[ADD_EVENT_LISTENER](clickEvent, click);\n\n\t  if (autoExec) { emit(true); }\n\t}\n\n\t/**\n\t * Router class\n\t */\n\tfunction Router() {\n\t  this.$ = [];\n\t  observable(this); // make it observable\n\t  central.on('stop', this.s.bind(this));\n\t  central.on('emit', this.e.bind(this));\n\t}\n\n\tfunction normalize(path) {\n\t  return path.replace(/^\\/|\\/$/, '')\n\t}\n\n\tfunction isString(str) {\n\t  return typeof str == 'string'\n\t}\n\n\t/**\n\t * Get the part after domain name\n\t * @param {string} href - fullpath\n\t * @returns {string} path from root\n\t */\n\tfunction getPathFromRoot(href) {\n\t  return (href || loc.href).replace(RE_ORIGIN, '')\n\t}\n\n\t/**\n\t * Get the part after base\n\t * @param {string} href - fullpath\n\t * @returns {string} path from base\n\t */\n\tfunction getPathFromBase(href) {\n\t  var base = route._.base;\n\t  return base[0] === '#'\n\t    ? (href || loc.href || '').split(base)[1] || ''\n\t    : (loc ? getPathFromRoot(href) : href || '').replace(base, '')\n\t}\n\n\tfunction emit(force) {\n\t  // the stack is needed for redirections\n\t  var isRoot = emitStackLevel === 0;\n\t  if (MAX_EMIT_STACK_LEVEL <= emitStackLevel) { return }\n\n\t  emitStackLevel++;\n\t  emitStack.push(function() {\n\t    var path = getPathFromBase();\n\t    if (force || path !== current) {\n\t      central[TRIGGER]('emit', path);\n\t      current = path;\n\t    }\n\t  });\n\n\t  if (isRoot) {\n\t    var first;\n\t    while (first = emitStack.shift()) { first(); } // stack increses within this call\n\t    emitStackLevel = 0;\n\t  }\n\t}\n\n\tfunction click(e) {\n\t  if (\n\t    e.which !== 1 // not left click\n\t    || e.metaKey || e.ctrlKey || e.shiftKey // or meta keys\n\t    || e.defaultPrevented // or default prevented\n\t  ) { return }\n\n\t  var el = e.target;\n\t  while (el && el.nodeName !== 'A') { el = el.parentNode; }\n\n\t  if (\n\t    !el || el.nodeName !== 'A' // not A tag\n\t    || el[HAS_ATTRIBUTE]('download') // has download attr\n\t    || !el[HAS_ATTRIBUTE]('href') // has no href attr\n\t    || el.target && el.target !== '_self' // another window or frame\n\t    || el.href.indexOf(loc.href.match(RE_ORIGIN)[0]) === -1 // cross origin\n\t  ) { return }\n\n\t  var base = route._.base;\n\n\t  if (el.href !== loc.href\n\t    && (\n\t      el.href.split('#')[0] === loc.href.split('#')[0] // internal jump\n\t      || base[0] !== '#' && getPathFromRoot(el.href).indexOf(base) !== 0 // outside of base\n\t      || base[0] === '#' && el.href.split(base)[0] !== loc.href.split(base)[0] // outside of #base\n\t      || !go(getPathFromBase(el.href), el.title || doc.title) // route not found\n\t    )) { return }\n\n\t  e.preventDefault();\n\t}\n\n\t/**\n\t * Go to the path\n\t * @param {string} path - destination path\n\t * @param {string} title - page title\n\t * @param {boolean} shouldReplace - use replaceState or pushState\n\t * @returns {boolean} - route not found flag\n\t */\n\tfunction go(path, title, shouldReplace) {\n\t  // Server-side usage: directly execute handlers for the path\n\t  if (!hist) { return central[TRIGGER]('emit', getPathFromBase(path)) }\n\n\t  path = route._.base + normalize(path);\n\t  title = title || doc.title;\n\t  // browsers ignores the second parameter `title`\n\t  shouldReplace\n\t    ? hist.replaceState(null, title, path)\n\t    : hist.pushState(null, title, path);\n\t  // so we need to set it manually\n\t  doc.title = title;\n\t  routeFound = false;\n\t  emit();\n\t  return routeFound\n\t}\n\n\t/**\n\t * Go to path or set action\n\t * a single string:                go there\n\t * two strings:                    go there with setting a title\n\t * two strings and boolean:        replace history with setting a title\n\t * a single function:              set an action on the default route\n\t * a string/RegExp and a function: set an action on the route\n\t * @param {(string|function)} first - path / action / filter\n\t * @param {(string|RegExp|function)} second - title / action\n\t * @param {boolean} third - replace flag\n\t */\n\tprot.m = function(first, second, third) {\n\t  if (isString(first) && (!second || isString(second))) { go(first, second, third || false); }\n\t  else if (second) { this.r(first, second); }\n\t  else { this.r('@', first); }\n\t};\n\n\t/**\n\t * Stop routing\n\t */\n\tprot.s = function() {\n\t  this.off('*');\n\t  this.$ = [];\n\t};\n\n\t/**\n\t * Emit\n\t * @param {string} path - path\n\t */\n\tprot.e = function(path) {\n\t  this.$.concat('@').some(function(filter) {\n\t    var args = (filter === '@' ? parser : secondParser)(normalize(path), normalize(filter));\n\t    if (typeof args != 'undefined') {\n\t      this[TRIGGER].apply(null, [filter].concat(args));\n\t      return routeFound = true // exit from loop\n\t    }\n\t  }, this);\n\t};\n\n\t/**\n\t * Register route\n\t * @param {string} filter - filter for matching to url\n\t * @param {function} action - action to register\n\t */\n\tprot.r = function(filter, action) {\n\t  if (filter !== '@') {\n\t    filter = '/' + normalize(filter);\n\t    this.$.push(filter);\n\t  }\n\n\t  this.on(filter, action);\n\t};\n\n\tvar mainRouter = new Router();\n\tvar route = mainRouter.m.bind(mainRouter);\n\n\t// adding base and getPathFromBase to route so we can access them in route.tag's script\n\troute._ = { base: null, getPathFromBase: getPathFromBase };\n\n\t/**\n\t * Create a sub router\n\t * @returns {function} the method of a new Router object\n\t */\n\troute.create = function() {\n\t  var newSubRouter = new Router();\n\t  // assign sub-router's main method\n\t  var router = newSubRouter.m.bind(newSubRouter);\n\t  // stop only this sub-router\n\t  router.stop = newSubRouter.s.bind(newSubRouter);\n\t  return router\n\t};\n\n\t/**\n\t * Set the base of url\n\t * @param {(str|RegExp)} arg - a new base or '#' or '#!'\n\t */\n\troute.base = function(arg) {\n\t  route._.base = arg || '#';\n\t  current = getPathFromBase(); // recalculate current path\n\t};\n\n\t/** Exec routing right now **/\n\troute.exec = function() {\n\t  emit(true);\n\t};\n\n\t/**\n\t * Replace the default router to yours\n\t * @param {function} fn - your parser function\n\t * @param {function} fn2 - your secondParser function\n\t */\n\troute.parser = function(fn, fn2) {\n\t  if (!fn && !fn2) {\n\t    // reset parser for testing...\n\t    parser = DEFAULT_PARSER;\n\t    secondParser = DEFAULT_SECOND_PARSER;\n\t  }\n\t  if (fn) { parser = fn; }\n\t  if (fn2) { secondParser = fn2; }\n\t};\n\n\t/**\n\t * Helper function to get url query as an object\n\t * @returns {object} parsed query\n\t */\n\troute.query = function() {\n\t  var q = {};\n\t  var href = loc.href || current;\n\t  href.replace(/[?&](.+?)=([^&]*)/g, function(_, k, v) { q[k] = v; });\n\t  return q\n\t};\n\n\t/** Stop routing **/\n\troute.stop = function () {\n\t  if (started) {\n\t    if (win) {\n\t      win[REMOVE_EVENT_LISTENER](POPSTATE, debouncedEmit);\n\t      win[REMOVE_EVENT_LISTENER](HASHCHANGE, debouncedEmit);\n\t      doc[REMOVE_EVENT_LISTENER](clickEvent, click);\n\t    }\n\n\t    central[TRIGGER]('stop');\n\t    started = false;\n\t  }\n\t};\n\n\t/**\n\t * Start routing\n\t * @param {boolean} autoExec - automatically exec after starting if true\n\t */\n\troute.start = function (autoExec) {\n\t  if (!started) {\n\t    if (win) {\n\t      if (document.readyState === 'interactive' || document.readyState === 'complete') {\n\t        start(autoExec);\n\t      } else {\n\t        document.onreadystatechange = function () {\n\t          if (document.readyState === 'interactive') {\n\t            // the timeout is needed to solve\n\t            // a weird safari bug https://github.com/riot/route/issues/33\n\t            setTimeout(function() { start(autoExec); }, 1);\n\t          }\n\t        };\n\t      }\n\t    }\n\n\t    started = true;\n\t  }\n\t};\n\n\t/** Prepare the router **/\n\troute.base();\n\troute.parser();\n\n\t/**\n\t * Scrolls to an element\n\t * @param {HTMLElement} elem The element to scroll to.\n\t */\n\tfunction seek(elem) {\n\t  if (!elem) return;\n\n\t  const top = elem.getBoundingClientRect().top + window.pageYOffset;\n\n\t  window.scrollTo({\n\t    top: top - 200,\n\t    // top: top - Math.min(200, window.innerHeight / 3),\n\t    behavior: \"smooth\"\n\t  });\n\t  // elem.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n\t}\n\n\tfunction toast(msg, button, delay) {\n\t  return new USToastElement(msg, button, delay);\n\t}\n\n\tconst html = String.raw;\n\n\tclass USToastElement extends HTMLElement {\n\t  constructor(msg, button = { label: \"Close\" }, delay = 10000) {\n\t    super();\n\t    this.action =\n\t      button && typeof button.action === \"function\" ? button.action : () => {};\n\n\t    this.innerHTML = html`\n      <span>${msg}</span>\n      <button>${button.label}</button>\n    `;\n\n\t    const container = document.querySelector(\"#toastContainer\");\n\t    if (container) container.appendChild(this);\n\t    this._delay = delay;\n\t    this.setTimeout();\n\n\t    this.querySelector(\"button\").addEventListener(\"click\", () => {\n\t      this.remove();\n\t      this.action();\n\t      this.clearTimeout();\n\t    });\n\t  }\n\n\t  setTimeout() {\n\t    this._timeout = setTimeout(this.remove.bind(this), this._delay);\n\t  }\n\t  clearTimeout() {\n\t    clearTimeout(this._timeout);\n\t  }\n\t}\n\n\tif (!customElements.get(\"us-toast\")) {\n\t  customElements.define(\"us-toast\", USToastElement);\n\t}\n\n\tlet offset = null;\n\tconst readingObserver = new IntersectionObserver(\n\t  entries => {\n\t    for (const entry of entries)\n\t      if (entry.isIntersecting) {\n\t        offset = entry.target;\n\t      }\n\t  },\n\t  {\n\t    rootMargin: \"0px 0px -90% 0px\",\n\t    threshold: 1.0\n\t  }\n\t);\n\n\tdocument.addEventListener(\"beforeunload\", () => {\n\t  /* let article = 0;\n\t  let section = 0;\n\t  let paragraph = 0;\n\n\t  if (offset && offset.tagName === \"H3\") {\n\t    const section = offset.closest(\"section\");\n\t    paragraph = [...section.querySelectorAll(\"h3\")].indexOf(offset);\n\t    offset = section;\n\t  }\n\n\t  if (offset && offset.tagName !== \"H2\") {\n\t    let sectionHeading = previous(offset, \"h2\");\n\t    if (sectionHeading) offset = sectionHeading;\n\t  }\n\n\t  if (offset && offset.tagName === \"H2\") {\n\t    const article = offset.closest(\"article\");\n\t    section = [...article.querySelectorAll(\"h2\")].indexOf(offset);\n\t  }\n\n\t  if (offset && offset.tagName !== \"H1\") offset = previous(offset, \"h1\");\n\n\t  if (offset && offset.tagName === \"H1\") {\n\t    offset = offset.closest(\"article\");\n\t    article = [...offset.parentNode.querySelectorAll(\"article\")].indexOf(\n\t      offset\n\t    );\n\t  } */\n\t  localStorage.setItem(\"lastRead\", window.pageYOffset);\n\t});\n\n\tdocument.addEventListener(\"pointerup\", () => {\n\t  localStorage.setItem(\"lastRead\", window.pageYOffset);\n\t});\n\n\tdocument.addEventListener(\"blur\", () => {\n\t  localStorage.setItem(\"lastRead\", window.pageYOffset);\n\t});\n\n\tclass USConstitutionElement extends HTMLElement {\n\t  constructor() {\n\t    super();\n\t  }\n\n\t  connectedCallback() {\n\t    this.continueWhereLastRead();\n\t  }\n\n\t  async continueWhereLastRead() {\n\t    // const targets = this.querySelectorAll(\"h1, h2, h3\");\n\n\t    // targets.forEach(target => readingObserver.observe(target));\n\n\t    let lastRead = localStorage.getItem(\"lastRead\");\n\t    if (!lastRead) return;\n\n\t    toast(\"Continue where you left off?\", {\n\t      label: \"Go\",\n\t      action: () => {\n\t        // const [article, section, paragraph] = lastRead\n\t        //   .split(\",\")\n\t        //   .map(s => parseInt(s, 10));\n\n\t        // console.log(\"[article, section, paragraph] :\", [\n\t        //   article,\n\t        //   section,\n\t        //   paragraph\n\t        // ]);\n\n\t        // let articleElem, sectionElem, paragraphElem;\n\t        // articleElem = this.querySelectorAll(\"article\")[article];\n\n\t        // sectionElem = articleElem.querySelectorAll(\"section\")[section];\n\n\t        // if (sectionElem) {\n\t        //   paragraphElem = sectionElem.querySelectorAll(\"h3\")[paragraph];\n\t        //   if (paragraphElem) return seek(paragraphElem);\n\n\t        //   const sm = previous(sectionElem, \".section-marker\");\n\t        //   if (sm) return seek(sm);\n\t        // }\n\n\t        // let h1 = articleElem.querySelector(\"h1\");\n\t        // return seek(previous(h1, \"hr[id]\"));\n\t        window.scrollTo({\n\t          top: parseFloat(lastRead, 10),\n\t          behavior: \"smooth\"\n\t        });\n\t      }\n\t    });\n\t  }\n\t}\n\n\tif (!customElements.get(\"us-constitution\")) {\n\t  customElements.define(\"us-constitution\", USConstitutionElement);\n\t}\n\n\tvar mark = createCommonjsModule(function (module, exports) {\n\t/*!***************************************************\n\t* mark.js v8.11.1\n\t* https://markjs.io/\n\t* Copyright (c) 20142018, Julian Khnel\n\t* Released under the MIT license https://git.io/vwTVl\n\t*****************************************************/\n\n\t(function (global, factory) {\n\t\tmodule.exports = factory();\n\t}(commonjsGlobal, (function () {\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n\t  return typeof obj;\n\t} : function (obj) {\n\t  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n\t};\n\n\n\n\n\n\n\n\n\n\n\n\tvar classCallCheck = function (instance, Constructor) {\n\t  if (!(instance instanceof Constructor)) {\n\t    throw new TypeError(\"Cannot call a class as a function\");\n\t  }\n\t};\n\n\tvar createClass = function () {\n\t  function defineProperties(target, props) {\n\t    for (var i = 0; i < props.length; i++) {\n\t      var descriptor = props[i];\n\t      descriptor.enumerable = descriptor.enumerable || false;\n\t      descriptor.configurable = true;\n\t      if (\"value\" in descriptor) descriptor.writable = true;\n\t      Object.defineProperty(target, descriptor.key, descriptor);\n\t    }\n\t  }\n\n\t  return function (Constructor, protoProps, staticProps) {\n\t    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t    if (staticProps) defineProperties(Constructor, staticProps);\n\t    return Constructor;\n\t  };\n\t}();\n\n\n\n\n\n\n\n\tvar _extends = Object.assign || function (target) {\n\t  for (var i = 1; i < arguments.length; i++) {\n\t    var source = arguments[i];\n\n\t    for (var key in source) {\n\t      if (Object.prototype.hasOwnProperty.call(source, key)) {\n\t        target[key] = source[key];\n\t      }\n\t    }\n\t  }\n\n\t  return target;\n\t};\n\n\tvar DOMIterator = function () {\n\t  function DOMIterator(ctx) {\n\t    var iframes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t    var exclude = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\t    var iframesTimeout = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 5000;\n\t    classCallCheck(this, DOMIterator);\n\n\t    this.ctx = ctx;\n\t    this.iframes = iframes;\n\t    this.exclude = exclude;\n\t    this.iframesTimeout = iframesTimeout;\n\t  }\n\n\t  createClass(DOMIterator, [{\n\t    key: 'getContexts',\n\t    value: function getContexts() {\n\t      var ctx = void 0,\n\t          filteredCtx = [];\n\t      if (typeof this.ctx === 'undefined' || !this.ctx) {\n\t        ctx = [];\n\t      } else if (NodeList.prototype.isPrototypeOf(this.ctx)) {\n\t        ctx = Array.prototype.slice.call(this.ctx);\n\t      } else if (Array.isArray(this.ctx)) {\n\t        ctx = this.ctx;\n\t      } else if (typeof this.ctx === 'string') {\n\t        ctx = Array.prototype.slice.call(document.querySelectorAll(this.ctx));\n\t      } else {\n\t        ctx = [this.ctx];\n\t      }\n\t      ctx.forEach(function (ctx) {\n\t        var isDescendant = filteredCtx.filter(function (contexts) {\n\t          return contexts.contains(ctx);\n\t        }).length > 0;\n\t        if (filteredCtx.indexOf(ctx) === -1 && !isDescendant) {\n\t          filteredCtx.push(ctx);\n\t        }\n\t      });\n\t      return filteredCtx;\n\t    }\n\t  }, {\n\t    key: 'getIframeContents',\n\t    value: function getIframeContents(ifr, successFn) {\n\t      var errorFn = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n\n\t      var doc = void 0;\n\t      try {\n\t        var ifrWin = ifr.contentWindow;\n\t        doc = ifrWin.document;\n\t        if (!ifrWin || !doc) {\n\t          throw new Error('iframe inaccessible');\n\t        }\n\t      } catch (e) {\n\t        errorFn();\n\t      }\n\t      if (doc) {\n\t        successFn(doc);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'isIframeBlank',\n\t    value: function isIframeBlank(ifr) {\n\t      var bl = 'about:blank',\n\t          src = ifr.getAttribute('src').trim(),\n\t          href = ifr.contentWindow.location.href;\n\t      return href === bl && src !== bl && src;\n\t    }\n\t  }, {\n\t    key: 'observeIframeLoad',\n\t    value: function observeIframeLoad(ifr, successFn, errorFn) {\n\t      var _this = this;\n\n\t      var called = false,\n\t          tout = null;\n\t      var listener = function listener() {\n\t        if (called) {\n\t          return;\n\t        }\n\t        called = true;\n\t        clearTimeout(tout);\n\t        try {\n\t          if (!_this.isIframeBlank(ifr)) {\n\t            ifr.removeEventListener('load', listener);\n\t            _this.getIframeContents(ifr, successFn, errorFn);\n\t          }\n\t        } catch (e) {\n\t          errorFn();\n\t        }\n\t      };\n\t      ifr.addEventListener('load', listener);\n\t      tout = setTimeout(listener, this.iframesTimeout);\n\t    }\n\t  }, {\n\t    key: 'onIframeReady',\n\t    value: function onIframeReady(ifr, successFn, errorFn) {\n\t      try {\n\t        if (ifr.contentWindow.document.readyState === 'complete') {\n\t          if (this.isIframeBlank(ifr)) {\n\t            this.observeIframeLoad(ifr, successFn, errorFn);\n\t          } else {\n\t            this.getIframeContents(ifr, successFn, errorFn);\n\t          }\n\t        } else {\n\t          this.observeIframeLoad(ifr, successFn, errorFn);\n\t        }\n\t      } catch (e) {\n\t        errorFn();\n\t      }\n\t    }\n\t  }, {\n\t    key: 'waitForIframes',\n\t    value: function waitForIframes(ctx, done) {\n\t      var _this2 = this;\n\n\t      var eachCalled = 0;\n\t      this.forEachIframe(ctx, function () {\n\t        return true;\n\t      }, function (ifr) {\n\t        eachCalled++;\n\t        _this2.waitForIframes(ifr.querySelector('html'), function () {\n\t          if (! --eachCalled) {\n\t            done();\n\t          }\n\t        });\n\t      }, function (handled) {\n\t        if (!handled) {\n\t          done();\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'forEachIframe',\n\t    value: function forEachIframe(ctx, filter, each) {\n\t      var _this3 = this;\n\n\t      var end = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n\n\t      var ifr = ctx.querySelectorAll('iframe'),\n\t          open = ifr.length,\n\t          handled = 0;\n\t      ifr = Array.prototype.slice.call(ifr);\n\t      var checkEnd = function checkEnd() {\n\t        if (--open <= 0) {\n\t          end(handled);\n\t        }\n\t      };\n\t      if (!open) {\n\t        checkEnd();\n\t      }\n\t      ifr.forEach(function (ifr) {\n\t        if (DOMIterator.matches(ifr, _this3.exclude)) {\n\t          checkEnd();\n\t        } else {\n\t          _this3.onIframeReady(ifr, function (con) {\n\t            if (filter(ifr)) {\n\t              handled++;\n\t              each(con);\n\t            }\n\t            checkEnd();\n\t          }, checkEnd);\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createIterator',\n\t    value: function createIterator(ctx, whatToShow, filter) {\n\t      return document.createNodeIterator(ctx, whatToShow, filter, false);\n\t    }\n\t  }, {\n\t    key: 'createInstanceOnIframe',\n\t    value: function createInstanceOnIframe(contents) {\n\t      return new DOMIterator(contents.querySelector('html'), this.iframes);\n\t    }\n\t  }, {\n\t    key: 'compareNodeIframe',\n\t    value: function compareNodeIframe(node, prevNode, ifr) {\n\t      var compCurr = node.compareDocumentPosition(ifr),\n\t          prev = Node.DOCUMENT_POSITION_PRECEDING;\n\t      if (compCurr & prev) {\n\t        if (prevNode !== null) {\n\t          var compPrev = prevNode.compareDocumentPosition(ifr),\n\t              after = Node.DOCUMENT_POSITION_FOLLOWING;\n\t          if (compPrev & after) {\n\t            return true;\n\t          }\n\t        } else {\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: 'getIteratorNode',\n\t    value: function getIteratorNode(itr) {\n\t      var prevNode = itr.previousNode();\n\t      var node = void 0;\n\t      if (prevNode === null) {\n\t        node = itr.nextNode();\n\t      } else {\n\t        node = itr.nextNode() && itr.nextNode();\n\t      }\n\t      return {\n\t        prevNode: prevNode,\n\t        node: node\n\t      };\n\t    }\n\t  }, {\n\t    key: 'checkIframeFilter',\n\t    value: function checkIframeFilter(node, prevNode, currIfr, ifr) {\n\t      var key = false,\n\t          handled = false;\n\t      ifr.forEach(function (ifrDict, i) {\n\t        if (ifrDict.val === currIfr) {\n\t          key = i;\n\t          handled = ifrDict.handled;\n\t        }\n\t      });\n\t      if (this.compareNodeIframe(node, prevNode, currIfr)) {\n\t        if (key === false && !handled) {\n\t          ifr.push({\n\t            val: currIfr,\n\t            handled: true\n\t          });\n\t        } else if (key !== false && !handled) {\n\t          ifr[key].handled = true;\n\t        }\n\t        return true;\n\t      }\n\t      if (key === false) {\n\t        ifr.push({\n\t          val: currIfr,\n\t          handled: false\n\t        });\n\t      }\n\t      return false;\n\t    }\n\t  }, {\n\t    key: 'handleOpenIframes',\n\t    value: function handleOpenIframes(ifr, whatToShow, eCb, fCb) {\n\t      var _this4 = this;\n\n\t      ifr.forEach(function (ifrDict) {\n\t        if (!ifrDict.handled) {\n\t          _this4.getIframeContents(ifrDict.val, function (con) {\n\t            _this4.createInstanceOnIframe(con).forEachNode(whatToShow, eCb, fCb);\n\t          });\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'iterateThroughNodes',\n\t    value: function iterateThroughNodes(whatToShow, ctx, eachCb, filterCb, doneCb) {\n\t      var _this5 = this;\n\n\t      var itr = this.createIterator(ctx, whatToShow, filterCb);\n\t      var ifr = [],\n\t          elements = [],\n\t          node = void 0,\n\t          prevNode = void 0,\n\t          retrieveNodes = function retrieveNodes() {\n\t        var _getIteratorNode = _this5.getIteratorNode(itr);\n\n\t        prevNode = _getIteratorNode.prevNode;\n\t        node = _getIteratorNode.node;\n\n\t        return node;\n\t      };\n\t      while (retrieveNodes()) {\n\t        if (this.iframes) {\n\t          this.forEachIframe(ctx, function (currIfr) {\n\t            return _this5.checkIframeFilter(node, prevNode, currIfr, ifr);\n\t          }, function (con) {\n\t            _this5.createInstanceOnIframe(con).forEachNode(whatToShow, function (ifrNode) {\n\t              return elements.push(ifrNode);\n\t            }, filterCb);\n\t          });\n\t        }\n\t        elements.push(node);\n\t      }\n\t      elements.forEach(function (node) {\n\t        eachCb(node);\n\t      });\n\t      if (this.iframes) {\n\t        this.handleOpenIframes(ifr, whatToShow, eachCb, filterCb);\n\t      }\n\t      doneCb();\n\t    }\n\t  }, {\n\t    key: 'forEachNode',\n\t    value: function forEachNode(whatToShow, each, filter) {\n\t      var _this6 = this;\n\n\t      var done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n\n\t      var contexts = this.getContexts();\n\t      var open = contexts.length;\n\t      if (!open) {\n\t        done();\n\t      }\n\t      contexts.forEach(function (ctx) {\n\t        var ready = function ready() {\n\t          _this6.iterateThroughNodes(whatToShow, ctx, each, filter, function () {\n\t            if (--open <= 0) {\n\t              done();\n\t            }\n\t          });\n\t        };\n\t        if (_this6.iframes) {\n\t          _this6.waitForIframes(ctx, ready);\n\t        } else {\n\t          ready();\n\t        }\n\t      });\n\t    }\n\t  }], [{\n\t    key: 'matches',\n\t    value: function matches(element, selector) {\n\t      var selectors = typeof selector === 'string' ? [selector] : selector,\n\t          fn = element.matches || element.matchesSelector || element.msMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.webkitMatchesSelector;\n\t      if (fn) {\n\t        var match = false;\n\t        selectors.every(function (sel) {\n\t          if (fn.call(element, sel)) {\n\t            match = true;\n\t            return false;\n\t          }\n\t          return true;\n\t        });\n\t        return match;\n\t      } else {\n\t        return false;\n\t      }\n\t    }\n\t  }]);\n\t  return DOMIterator;\n\t}();\n\n\tvar Mark$1 = function () {\n\t  function Mark(ctx) {\n\t    classCallCheck(this, Mark);\n\n\t    this.ctx = ctx;\n\t    this.ie = false;\n\t    var ua = window.navigator.userAgent;\n\t    if (ua.indexOf('MSIE') > -1 || ua.indexOf('Trident') > -1) {\n\t      this.ie = true;\n\t    }\n\t  }\n\n\t  createClass(Mark, [{\n\t    key: 'log',\n\t    value: function log(msg) {\n\t      var level = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'debug';\n\n\t      var log = this.opt.log;\n\t      if (!this.opt.debug) {\n\t        return;\n\t      }\n\t      if ((typeof log === 'undefined' ? 'undefined' : _typeof(log)) === 'object' && typeof log[level] === 'function') {\n\t        log[level]('mark.js: ' + msg);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'escapeStr',\n\t    value: function escapeStr(str) {\n\t      return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n\t    }\n\t  }, {\n\t    key: 'createRegExp',\n\t    value: function createRegExp(str) {\n\t      if (this.opt.wildcards !== 'disabled') {\n\t        str = this.setupWildcardsRegExp(str);\n\t      }\n\t      str = this.escapeStr(str);\n\t      if (Object.keys(this.opt.synonyms).length) {\n\t        str = this.createSynonymsRegExp(str);\n\t      }\n\t      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n\t        str = this.setupIgnoreJoinersRegExp(str);\n\t      }\n\t      if (this.opt.diacritics) {\n\t        str = this.createDiacriticsRegExp(str);\n\t      }\n\t      str = this.createMergedBlanksRegExp(str);\n\t      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n\t        str = this.createJoinersRegExp(str);\n\t      }\n\t      if (this.opt.wildcards !== 'disabled') {\n\t        str = this.createWildcardsRegExp(str);\n\t      }\n\t      str = this.createAccuracyRegExp(str);\n\t      return str;\n\t    }\n\t  }, {\n\t    key: 'createSynonymsRegExp',\n\t    value: function createSynonymsRegExp(str) {\n\t      var syn = this.opt.synonyms,\n\t          sens = this.opt.caseSensitive ? '' : 'i',\n\t          joinerPlaceholder = this.opt.ignoreJoiners || this.opt.ignorePunctuation.length ? '\\0' : '';\n\t      for (var index in syn) {\n\t        if (syn.hasOwnProperty(index)) {\n\t          var value = syn[index],\n\t              k1 = this.opt.wildcards !== 'disabled' ? this.setupWildcardsRegExp(index) : this.escapeStr(index),\n\t              k2 = this.opt.wildcards !== 'disabled' ? this.setupWildcardsRegExp(value) : this.escapeStr(value);\n\t          if (k1 !== '' && k2 !== '') {\n\t            str = str.replace(new RegExp('(' + this.escapeStr(k1) + '|' + this.escapeStr(k2) + ')', 'gm' + sens), joinerPlaceholder + ('(' + this.processSynomyms(k1) + '|') + (this.processSynomyms(k2) + ')') + joinerPlaceholder);\n\t          }\n\t        }\n\t      }\n\t      return str;\n\t    }\n\t  }, {\n\t    key: 'processSynomyms',\n\t    value: function processSynomyms(str) {\n\t      if (this.opt.ignoreJoiners || this.opt.ignorePunctuation.length) {\n\t        str = this.setupIgnoreJoinersRegExp(str);\n\t      }\n\t      return str;\n\t    }\n\t  }, {\n\t    key: 'setupWildcardsRegExp',\n\t    value: function setupWildcardsRegExp(str) {\n\t      str = str.replace(/(?:\\\\)*\\?/g, function (val) {\n\t        return val.charAt(0) === '\\\\' ? '?' : '\\x01';\n\t      });\n\t      return str.replace(/(?:\\\\)*\\*/g, function (val) {\n\t        return val.charAt(0) === '\\\\' ? '*' : '\\x02';\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createWildcardsRegExp',\n\t    value: function createWildcardsRegExp(str) {\n\t      var spaces = this.opt.wildcards === 'withSpaces';\n\t      return str.replace(/\\u0001/g, spaces ? '[\\\\S\\\\s]?' : '\\\\S?').replace(/\\u0002/g, spaces ? '[\\\\S\\\\s]*?' : '\\\\S*');\n\t    }\n\t  }, {\n\t    key: 'setupIgnoreJoinersRegExp',\n\t    value: function setupIgnoreJoinersRegExp(str) {\n\t      return str.replace(/[^(|)\\\\]/g, function (val, indx, original) {\n\t        var nextChar = original.charAt(indx + 1);\n\t        if (/[(|)\\\\]/.test(nextChar) || nextChar === '') {\n\t          return val;\n\t        } else {\n\t          return val + '\\0';\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: 'createJoinersRegExp',\n\t    value: function createJoinersRegExp(str) {\n\t      var joiner = [];\n\t      var ignorePunctuation = this.opt.ignorePunctuation;\n\t      if (Array.isArray(ignorePunctuation) && ignorePunctuation.length) {\n\t        joiner.push(this.escapeStr(ignorePunctuation.join('')));\n\t      }\n\t      if (this.opt.ignoreJoiners) {\n\t        joiner.push('\\\\u00ad\\\\u200b\\\\u200c\\\\u200d');\n\t      }\n\t      return joiner.length ? str.split(/\\u0000+/).join('[' + joiner.join('') + ']*') : str;\n\t    }\n\t  }, {\n\t    key: 'createDiacriticsRegExp',\n\t    value: function createDiacriticsRegExp(str) {\n\t      var sens = this.opt.caseSensitive ? '' : 'i',\n\t          dct = this.opt.caseSensitive ? ['a', 'A', 'c', 'C', 'd', 'D', 'e', 'E', 'i', 'I', 'l', 'L', 'n', 'N', 'o', 'O', 'r', 'R', 's', 'S', 't', 'T', 'u', 'U', 'y', 'Y', 'z', 'Z'] : ['aA', 'cC', 'dD', 'eE', 'iI', 'lL', 'nN', 'oO', 'rR', 'sS', 'tT', 'uU', 'yY', 'zZ'];\n\t      var handled = [];\n\t      str.split('').forEach(function (ch) {\n\t        dct.every(function (dct) {\n\t          if (dct.indexOf(ch) !== -1) {\n\t            if (handled.indexOf(dct) > -1) {\n\t              return false;\n\t            }\n\t            str = str.replace(new RegExp('[' + dct + ']', 'gm' + sens), '[' + dct + ']');\n\t            handled.push(dct);\n\t          }\n\t          return true;\n\t        });\n\t      });\n\t      return str;\n\t    }\n\t  }, {\n\t    key: 'createMergedBlanksRegExp',\n\t    value: function createMergedBlanksRegExp(str) {\n\t      return str.replace(/[\\s]+/gmi, '[\\\\s]+');\n\t    }\n\t  }, {\n\t    key: 'createAccuracyRegExp',\n\t    value: function createAccuracyRegExp(str) {\n\t      var _this = this;\n\n\t      var chars = '!\"#$%&\\'()*+,-./:;<=>?@[\\\\]^_`{|}~';\n\t      var acc = this.opt.accuracy,\n\t          val = typeof acc === 'string' ? acc : acc.value,\n\t          ls = typeof acc === 'string' ? [] : acc.limiters,\n\t          lsJoin = '';\n\t      ls.forEach(function (limiter) {\n\t        lsJoin += '|' + _this.escapeStr(limiter);\n\t      });\n\t      switch (val) {\n\t        case 'partially':\n\t        default:\n\t          return '()(' + str + ')';\n\t        case 'complementary':\n\t          lsJoin = '\\\\s' + (lsJoin ? lsJoin : this.escapeStr(chars));\n\t          return '()([^' + lsJoin + ']*' + str + '[^' + lsJoin + ']*)';\n\t        case 'exactly':\n\t          return '(^|\\\\s' + lsJoin + ')(' + str + ')(?=$|\\\\s' + lsJoin + ')';\n\t      }\n\t    }\n\t  }, {\n\t    key: 'getSeparatedKeywords',\n\t    value: function getSeparatedKeywords(sv) {\n\t      var _this2 = this;\n\n\t      var stack = [];\n\t      sv.forEach(function (kw) {\n\t        if (!_this2.opt.separateWordSearch) {\n\t          if (kw.trim() && stack.indexOf(kw) === -1) {\n\t            stack.push(kw);\n\t          }\n\t        } else {\n\t          kw.split(' ').forEach(function (kwSplitted) {\n\t            if (kwSplitted.trim() && stack.indexOf(kwSplitted) === -1) {\n\t              stack.push(kwSplitted);\n\t            }\n\t          });\n\t        }\n\t      });\n\t      return {\n\t        'keywords': stack.sort(function (a, b) {\n\t          return b.length - a.length;\n\t        }),\n\t        'length': stack.length\n\t      };\n\t    }\n\t  }, {\n\t    key: 'isNumeric',\n\t    value: function isNumeric(value) {\n\t      return Number(parseFloat(value)) == value;\n\t    }\n\t  }, {\n\t    key: 'checkRanges',\n\t    value: function checkRanges(array) {\n\t      var _this3 = this;\n\n\t      if (!Array.isArray(array) || Object.prototype.toString.call(array[0]) !== '[object Object]') {\n\t        this.log('markRanges() will only accept an array of objects');\n\t        this.opt.noMatch(array);\n\t        return [];\n\t      }\n\t      var stack = [];\n\t      var last = 0;\n\t      array.sort(function (a, b) {\n\t        return a.start - b.start;\n\t      }).forEach(function (item) {\n\t        var _callNoMatchOnInvalid = _this3.callNoMatchOnInvalidRanges(item, last),\n\t            start = _callNoMatchOnInvalid.start,\n\t            end = _callNoMatchOnInvalid.end,\n\t            valid = _callNoMatchOnInvalid.valid;\n\n\t        if (valid) {\n\t          item.start = start;\n\t          item.length = end - start;\n\t          stack.push(item);\n\t          last = end;\n\t        }\n\t      });\n\t      return stack;\n\t    }\n\t  }, {\n\t    key: 'callNoMatchOnInvalidRanges',\n\t    value: function callNoMatchOnInvalidRanges(range, last) {\n\t      var start = void 0,\n\t          end = void 0,\n\t          valid = false;\n\t      if (range && typeof range.start !== 'undefined') {\n\t        start = parseInt(range.start, 10);\n\t        end = start + parseInt(range.length, 10);\n\t        if (this.isNumeric(range.start) && this.isNumeric(range.length) && end - last > 0 && end - start > 0) {\n\t          valid = true;\n\t        } else {\n\t          this.log('Ignoring invalid or overlapping range: ' + ('' + JSON.stringify(range)));\n\t          this.opt.noMatch(range);\n\t        }\n\t      } else {\n\t        this.log('Ignoring invalid range: ' + JSON.stringify(range));\n\t        this.opt.noMatch(range);\n\t      }\n\t      return {\n\t        start: start,\n\t        end: end,\n\t        valid: valid\n\t      };\n\t    }\n\t  }, {\n\t    key: 'checkWhitespaceRanges',\n\t    value: function checkWhitespaceRanges(range, originalLength, string) {\n\t      var end = void 0,\n\t          valid = true,\n\t          max = string.length,\n\t          offset = originalLength - max,\n\t          start = parseInt(range.start, 10) - offset;\n\t      start = start > max ? max : start;\n\t      end = start + parseInt(range.length, 10);\n\t      if (end > max) {\n\t        end = max;\n\t        this.log('End range automatically set to the max value of ' + max);\n\t      }\n\t      if (start < 0 || end - start < 0 || start > max || end > max) {\n\t        valid = false;\n\t        this.log('Invalid range: ' + JSON.stringify(range));\n\t        this.opt.noMatch(range);\n\t      } else if (string.substring(start, end).replace(/\\s+/g, '') === '') {\n\t        valid = false;\n\t        this.log('Skipping whitespace only range: ' + JSON.stringify(range));\n\t        this.opt.noMatch(range);\n\t      }\n\t      return {\n\t        start: start,\n\t        end: end,\n\t        valid: valid\n\t      };\n\t    }\n\t  }, {\n\t    key: 'getTextNodes',\n\t    value: function getTextNodes(cb) {\n\t      var _this4 = this;\n\n\t      var val = '',\n\t          nodes = [];\n\t      this.iterator.forEachNode(NodeFilter.SHOW_TEXT, function (node) {\n\t        nodes.push({\n\t          start: val.length,\n\t          end: (val += node.textContent).length,\n\t          node: node\n\t        });\n\t      }, function (node) {\n\t        if (_this4.matchesExclude(node.parentNode)) {\n\t          return NodeFilter.FILTER_REJECT;\n\t        } else {\n\t          return NodeFilter.FILTER_ACCEPT;\n\t        }\n\t      }, function () {\n\t        cb({\n\t          value: val,\n\t          nodes: nodes\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'matchesExclude',\n\t    value: function matchesExclude(el) {\n\t      return DOMIterator.matches(el, this.opt.exclude.concat(['script', 'style', 'title', 'head', 'html']));\n\t    }\n\t  }, {\n\t    key: 'wrapRangeInTextNode',\n\t    value: function wrapRangeInTextNode(node, start, end) {\n\t      var hEl = !this.opt.element ? 'mark' : this.opt.element,\n\t          startNode = node.splitText(start),\n\t          ret = startNode.splitText(end - start);\n\t      var repl = document.createElement(hEl);\n\t      repl.setAttribute('data-markjs', 'true');\n\t      if (this.opt.className) {\n\t        repl.setAttribute('class', this.opt.className);\n\t      }\n\t      repl.textContent = startNode.textContent;\n\t      startNode.parentNode.replaceChild(repl, startNode);\n\t      return ret;\n\t    }\n\t  }, {\n\t    key: 'wrapRangeInMappedTextNode',\n\t    value: function wrapRangeInMappedTextNode(dict, start, end, filterCb, eachCb) {\n\t      var _this5 = this;\n\n\t      dict.nodes.every(function (n, i) {\n\t        var sibl = dict.nodes[i + 1];\n\t        if (typeof sibl === 'undefined' || sibl.start > start) {\n\t          if (!filterCb(n.node)) {\n\t            return false;\n\t          }\n\t          var s = start - n.start,\n\t              e = (end > n.end ? n.end : end) - n.start,\n\t              startStr = dict.value.substr(0, n.start),\n\t              endStr = dict.value.substr(e + n.start);\n\t          n.node = _this5.wrapRangeInTextNode(n.node, s, e);\n\t          dict.value = startStr + endStr;\n\t          dict.nodes.forEach(function (k, j) {\n\t            if (j >= i) {\n\t              if (dict.nodes[j].start > 0 && j !== i) {\n\t                dict.nodes[j].start -= e;\n\t              }\n\t              dict.nodes[j].end -= e;\n\t            }\n\t          });\n\t          end -= e;\n\t          eachCb(n.node.previousSibling, n.start);\n\t          if (end > n.end) {\n\t            start = n.end;\n\t          } else {\n\t            return false;\n\t          }\n\t        }\n\t        return true;\n\t      });\n\t    }\n\t  }, {\n\t    key: 'wrapMatches',\n\t    value: function wrapMatches(regex, ignoreGroups, filterCb, eachCb, endCb) {\n\t      var _this6 = this;\n\n\t      var matchIdx = ignoreGroups === 0 ? 0 : ignoreGroups + 1;\n\t      this.getTextNodes(function (dict) {\n\t        dict.nodes.forEach(function (node) {\n\t          node = node.node;\n\t          var match = void 0;\n\t          while ((match = regex.exec(node.textContent)) !== null && match[matchIdx] !== '') {\n\t            if (!filterCb(match[matchIdx], node)) {\n\t              continue;\n\t            }\n\t            var pos = match.index;\n\t            if (matchIdx !== 0) {\n\t              for (var i = 1; i < matchIdx; i++) {\n\t                pos += match[i].length;\n\t              }\n\t            }\n\t            node = _this6.wrapRangeInTextNode(node, pos, pos + match[matchIdx].length);\n\t            eachCb(node.previousSibling);\n\t            regex.lastIndex = 0;\n\t          }\n\t        });\n\t        endCb();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'wrapMatchesAcrossElements',\n\t    value: function wrapMatchesAcrossElements(regex, ignoreGroups, filterCb, eachCb, endCb) {\n\t      var _this7 = this;\n\n\t      var matchIdx = ignoreGroups === 0 ? 0 : ignoreGroups + 1;\n\t      this.getTextNodes(function (dict) {\n\t        var match = void 0;\n\t        while ((match = regex.exec(dict.value)) !== null && match[matchIdx] !== '') {\n\t          var start = match.index;\n\t          if (matchIdx !== 0) {\n\t            for (var i = 1; i < matchIdx; i++) {\n\t              start += match[i].length;\n\t            }\n\t          }\n\t          var end = start + match[matchIdx].length;\n\t          _this7.wrapRangeInMappedTextNode(dict, start, end, function (node) {\n\t            return filterCb(match[matchIdx], node);\n\t          }, function (node, lastIndex) {\n\t            regex.lastIndex = lastIndex;\n\t            eachCb(node);\n\t          });\n\t        }\n\t        endCb();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'wrapRangeFromIndex',\n\t    value: function wrapRangeFromIndex(ranges, filterCb, eachCb, endCb) {\n\t      var _this8 = this;\n\n\t      this.getTextNodes(function (dict) {\n\t        var originalLength = dict.value.length;\n\t        ranges.forEach(function (range, counter) {\n\t          var _checkWhitespaceRange = _this8.checkWhitespaceRanges(range, originalLength, dict.value),\n\t              start = _checkWhitespaceRange.start,\n\t              end = _checkWhitespaceRange.end,\n\t              valid = _checkWhitespaceRange.valid;\n\n\t          if (valid) {\n\t            _this8.wrapRangeInMappedTextNode(dict, start, end, function (node) {\n\t              return filterCb(node, range, dict.value.substring(start, end), counter);\n\t            }, function (node) {\n\t              eachCb(node, range);\n\t            });\n\t          }\n\t        });\n\t        endCb();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'unwrapMatches',\n\t    value: function unwrapMatches(node) {\n\t      var parent = node.parentNode;\n\t      var docFrag = document.createDocumentFragment();\n\t      while (node.firstChild) {\n\t        docFrag.appendChild(node.removeChild(node.firstChild));\n\t      }\n\t      parent.replaceChild(docFrag, node);\n\t      if (!this.ie) {\n\t        parent.normalize();\n\t      } else {\n\t        this.normalizeTextNode(parent);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'normalizeTextNode',\n\t    value: function normalizeTextNode(node) {\n\t      if (!node) {\n\t        return;\n\t      }\n\t      if (node.nodeType === 3) {\n\t        while (node.nextSibling && node.nextSibling.nodeType === 3) {\n\t          node.nodeValue += node.nextSibling.nodeValue;\n\t          node.parentNode.removeChild(node.nextSibling);\n\t        }\n\t      } else {\n\t        this.normalizeTextNode(node.firstChild);\n\t      }\n\t      this.normalizeTextNode(node.nextSibling);\n\t    }\n\t  }, {\n\t    key: 'markRegExp',\n\t    value: function markRegExp(regexp, opt) {\n\t      var _this9 = this;\n\n\t      this.opt = opt;\n\t      this.log('Searching with expression \"' + regexp + '\"');\n\t      var totalMatches = 0,\n\t          fn = 'wrapMatches';\n\t      var eachCb = function eachCb(element) {\n\t        totalMatches++;\n\t        _this9.opt.each(element);\n\t      };\n\t      if (this.opt.acrossElements) {\n\t        fn = 'wrapMatchesAcrossElements';\n\t      }\n\t      this[fn](regexp, this.opt.ignoreGroups, function (match, node) {\n\t        return _this9.opt.filter(node, match, totalMatches);\n\t      }, eachCb, function () {\n\t        if (totalMatches === 0) {\n\t          _this9.opt.noMatch(regexp);\n\t        }\n\t        _this9.opt.done(totalMatches);\n\t      });\n\t    }\n\t  }, {\n\t    key: 'mark',\n\t    value: function mark(sv, opt) {\n\t      var _this10 = this;\n\n\t      this.opt = opt;\n\t      var totalMatches = 0,\n\t          fn = 'wrapMatches';\n\n\t      var _getSeparatedKeywords = this.getSeparatedKeywords(typeof sv === 'string' ? [sv] : sv),\n\t          kwArr = _getSeparatedKeywords.keywords,\n\t          kwArrLen = _getSeparatedKeywords.length,\n\t          sens = this.opt.caseSensitive ? '' : 'i',\n\t          handler = function handler(kw) {\n\t        var regex = new RegExp(_this10.createRegExp(kw), 'gm' + sens),\n\t            matches = 0;\n\t        _this10.log('Searching with expression \"' + regex + '\"');\n\t        _this10[fn](regex, 1, function (term, node) {\n\t          return _this10.opt.filter(node, kw, totalMatches, matches);\n\t        }, function (element) {\n\t          matches++;\n\t          totalMatches++;\n\t          _this10.opt.each(element);\n\t        }, function () {\n\t          if (matches === 0) {\n\t            _this10.opt.noMatch(kw);\n\t          }\n\t          if (kwArr[kwArrLen - 1] === kw) {\n\t            _this10.opt.done(totalMatches);\n\t          } else {\n\t            handler(kwArr[kwArr.indexOf(kw) + 1]);\n\t          }\n\t        });\n\t      };\n\n\t      if (this.opt.acrossElements) {\n\t        fn = 'wrapMatchesAcrossElements';\n\t      }\n\t      if (kwArrLen === 0) {\n\t        this.opt.done(totalMatches);\n\t      } else {\n\t        handler(kwArr[0]);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'markRanges',\n\t    value: function markRanges(rawRanges, opt) {\n\t      var _this11 = this;\n\n\t      this.opt = opt;\n\t      var totalMatches = 0,\n\t          ranges = this.checkRanges(rawRanges);\n\t      if (ranges && ranges.length) {\n\t        this.log('Starting to mark with the following ranges: ' + JSON.stringify(ranges));\n\t        this.wrapRangeFromIndex(ranges, function (node, range, match, counter) {\n\t          return _this11.opt.filter(node, range, match, counter);\n\t        }, function (element, range) {\n\t          totalMatches++;\n\t          _this11.opt.each(element, range);\n\t        }, function () {\n\t          _this11.opt.done(totalMatches);\n\t        });\n\t      } else {\n\t        this.opt.done(totalMatches);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'unmark',\n\t    value: function unmark(opt) {\n\t      var _this12 = this;\n\n\t      this.opt = opt;\n\t      var sel = this.opt.element ? this.opt.element : '*';\n\t      sel += '[data-markjs]';\n\t      if (this.opt.className) {\n\t        sel += '.' + this.opt.className;\n\t      }\n\t      this.log('Removal selector \"' + sel + '\"');\n\t      this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT, function (node) {\n\t        _this12.unwrapMatches(node);\n\t      }, function (node) {\n\t        var matchesSel = DOMIterator.matches(node, sel),\n\t            matchesExclude = _this12.matchesExclude(node);\n\t        if (!matchesSel || matchesExclude) {\n\t          return NodeFilter.FILTER_REJECT;\n\t        } else {\n\t          return NodeFilter.FILTER_ACCEPT;\n\t        }\n\t      }, this.opt.done);\n\t    }\n\t  }, {\n\t    key: 'opt',\n\t    set: function set$$1(val) {\n\t      this._opt = _extends({}, {\n\t        'element': '',\n\t        'className': '',\n\t        'exclude': [],\n\t        'iframes': false,\n\t        'iframesTimeout': 5000,\n\t        'separateWordSearch': true,\n\t        'diacritics': true,\n\t        'synonyms': {},\n\t        'accuracy': 'partially',\n\t        'acrossElements': false,\n\t        'caseSensitive': false,\n\t        'ignoreJoiners': false,\n\t        'ignoreGroups': 0,\n\t        'ignorePunctuation': [],\n\t        'wildcards': 'disabled',\n\t        'each': function each() {},\n\t        'noMatch': function noMatch() {},\n\t        'filter': function filter() {\n\t          return true;\n\t        },\n\t        'done': function done() {},\n\t        'debug': false,\n\t        'log': window.console\n\t      }, val);\n\t    },\n\t    get: function get$$1() {\n\t      return this._opt;\n\t    }\n\t  }, {\n\t    key: 'iterator',\n\t    get: function get$$1() {\n\t      return new DOMIterator(this.ctx, this.opt.iframes, this.opt.exclude, this.opt.iframesTimeout);\n\t    }\n\t  }]);\n\t  return Mark;\n\t}();\n\n\tfunction Mark(ctx) {\n\t  var _this = this;\n\n\t  var instance = new Mark$1(ctx);\n\t  this.mark = function (sv, opt) {\n\t    instance.mark(sv, opt);\n\t    return _this;\n\t  };\n\t  this.markRegExp = function (sv, opt) {\n\t    instance.markRegExp(sv, opt);\n\t    return _this;\n\t  };\n\t  this.markRanges = function (sv, opt) {\n\t    instance.markRanges(sv, opt);\n\t    return _this;\n\t  };\n\t  this.unmark = function (opt) {\n\t    instance.unmark(opt);\n\t    return _this;\n\t  };\n\t  return this;\n\t}\n\n\treturn Mark;\n\n\t})));\n\t});\n\n\tfunction dispatchUpdate(detail) {\n\t  window.dispatchEvent(new CustomEvent(\"bookmark-update\", { detail }));\n\t}\n\tfunction dispatchVisibilityChange(detail) {\n\t  window.dispatchEvent(\n\t    new CustomEvent(\"bookmark-visibility-change\", { detail })\n\t  );\n\t}\n\n\t/**\n\t * Returns an id used to serialize an element reference.\n\t * @param {Element} elem\n\t */\n\tfunction computeIdFromElement(elem) {\n\t  // const tagName =\n\t  return {\n\t    data: elem.data,\n\t    tag: elem.parentElement.tagName,\n\t    html: elem.parentElement.innerHTML\n\t  };\n\t}\n\n\t/**\n\t * Returns a node from an id created by `computeIdFromElement`\n\t * @param {Object} id\n\t */\n\tfunction computeElementFromId(id) {\n\t  let parentElem = null;\n\n\t  for (const elem of document.querySelectorAll(id.tag)) {\n\t    if (elem.innerHTML === id.html) {\n\t      parentElem = elem;\n\t      break;\n\t    }\n\t  }\n\n\t  if (!parentElem) {\n\t    toast(\"Sorry, we couldn't find this bookmark\");\n\t    return;\n\t  }\n\n\t  let finalNode = null;\n\n\t  for (const node of parentElem.childNodes) {\n\t    if (node.data === id.data) {\n\t      finalNode = node;\n\t      break;\n\t    }\n\t  }\n\n\t  return finalNode;\n\t}\n\n\tfunction restoreBookmarkSelectionBounds(bookmark) {\n\t  bookmark.offset.startNode = computeElementFromId(bookmark.offset.startNode);\n\t  bookmark.offset.endNode = computeElementFromId(bookmark.offset.endNode);\n\t}\n\n\t/**\n\t * Creates a bookmark\n\t * @param {Selection} selection\n\t */\n\tfunction computeBookmark(selection) {\n\t  if (!selection.rangeCount) return toast(\"No text selected\");\n\n\t  hideBookmarkHighlights();\n\n\t  var range = selection.getRangeAt(0);\n\t  const originalData = {\n\t    text: range.toString().trim(),\n\t    startContainer: range.startContainer,\n\t    startOffset: range.startOffset,\n\t    endContainer: range.endContainer,\n\t    endOffset: range.endOffset\n\t  };\n\n\t  const startContainerId = computeIdFromElement(originalData.startContainer);\n\t  const endContainerId = computeIdFromElement(originalData.endContainer);\n\n\t  const bookmark = {\n\t    time: Date.now(),\n\t    text: originalData.text,\n\t    offset: {\n\t      start: originalData.startOffset,\n\t      end: originalData.endOffset,\n\t      startNode: startContainerId,\n\t      endNode: endContainerId\n\t    }\n\t  };\n\n\t  return bookmark;\n\t}\n\n\t/**\n\t * Creates a bookmark\n\t * @param {Selection} selection\n\t */\n\tfunction createBookmark(selection) {\n\t  const bookmark = computeBookmark(selection);\n\n\t  const bookmarks = getBookmarks();\n\n\t  bookmarks.push(bookmark);\n\n\t  saveBookmarks(bookmarks);\n\t  toast(\"Bookmark saved\", {\n\t    label: \"View\",\n\t    action() {\n\t      showBookmark(bookmark);\n\t    }\n\t  });\n\t  //FIXME: showBookmarkHighlights();\n\t}\n\n\tfunction rangeIntersectsNode(node, range) {\n\t  if (range.intersectsNode) {\n\t    return range.intersectsNode(node);\n\t  }\n\n\t  return rangesIntersect(createRangeAroundNode(node), range);\n\t}\n\n\tfunction createRangeAroundNode(node) {\n\t  var rangeAroundNode = node.ownerDocument.createRange();\n\t  try {\n\t    rangeAroundNode.selectNode(node);\n\t  } catch (ex) {\n\t    rangeAroundNode.selectNodeContents(node);\n\t  }\n\t  return rangeAroundNode;\n\t}\n\n\tfunction rangesIntersect(range0, range1) {\n\t  return (\n\t    range1.compareBoundaryPoints(range1.END_TO_START, range0) === -1 &&\n\t    range1.compareBoundaryPoints(range1.START_TO_END, range0) === 1\n\t  );\n\t}\n\n\tconst highlightElement = document.createElement(\"mark\");\n\thighlightElement.classList.add(\"bookmark-highlight\");\n\n\tfunction wrap(elem, id) {\n\t  const wrapper = highlightElement.cloneNode();\n\t  wrapper.dataset.id = id;\n\t  elem.parentNode.insertBefore(wrapper, elem);\n\t  wrapper.appendChild(elem);\n\t}\n\n\t/**\n\t *\n\t * @param {HTMLElement} parentNode\n\t * @param {Range} range\n\t */\n\tfunction highlight(parentNode, range, id) {\n\t  if (range.startContainer === range.endContainer) {\n\t    let currElem = range.startContainer.splitText(range.startOffset);\n\t    currElem.splitText(range.endOffset);\n\n\t    wrap(currElem, id);\n\t    return;\n\t  }\n\t  var treeWalker = document.createTreeWalker(\n\t    parentNode,\n\t    NodeFilter.SHOW_TEXT,\n\t    {\n\t      acceptNode: function(node) {\n\t        return rangeIntersectsNode(node, range)\n\t          ? NodeFilter.FILTER_ACCEPT\n\t          : NodeFilter.FILTER_REJECT;\n\t      }\n\t    },\n\t    false\n\t  );\n\n\t  while (treeWalker.nextNode()) {\n\t    let currElem = treeWalker.currentNode;\n\n\t    if (currElem === range.startContainer)\n\t      currElem = currElem.splitText(range.startOffset);\n\t    else if (currElem === range.endContainer) {\n\t      currElem.splitText(range.endOffset);\n\t    }\n\n\t    wrap(currElem, id);\n\t  }\n\t}\n\n\tfunction hideBookmarkHighlights() {\n\t  dispatchVisibilityChange(false);\n\t  window.is_highlighting_bookmarks = false;\n\n\t  const highlights = document.querySelectorAll(\".bookmark-highlight\");\n\n\t  for (const h of highlights) {\n\t    const p = h.parentNode;\n\t    h.replaceWith(...h.childNodes);\n\t    p.normalize();\n\t  }\n\t}\n\n\tfunction showBookmark(bookmark) {\n\t  bookmark = JSON.parse(JSON.stringify(bookmark));\n\t  restoreBookmarkSelectionBounds(bookmark);\n\t  dispatchVisibilityChange(true);\n\t  window.is_highlighting_bookmarks = true;\n\t  const selection = window.getSelection();\n\t  selection.removeAllRanges();\n\n\t  const range = document.createRange();\n\n\t  console.log(\"restored bookmark\", bookmark);\n\n\t  range.setStart(bookmark.offset.startNode, bookmark.offset.start);\n\t  range.setEnd(bookmark.offset.endNode, bookmark.offset.end);\n\n\t  let node = range.commonAncestorContainer;\n\n\t  if (node.nodeType != 1) node = node.parentElement;\n\n\t  highlight(node, range, bookmark.time);\n\t}\n\n\tfunction showBookmarkHighlights() {\n\t  throw new Error(\"FIXME: Cannot show all bookmarks without risk of overlap.\");\n\t  dispatchVisibilityChange(true);\n\t  window.is_highlighting_bookmarks = true;\n\t  const bookmarks = getBookmarks();\n\n\t  if (!bookmarks || !bookmarks.length) return;\n\n\t  for (const bookmark of bookmarks) {\n\t    restoreBookmarkSelectionBounds(bookmark);\n\t  }\n\n\t  for (const bookmark of bookmarks) {\n\t    showBookmark(bookmark);\n\t  }\n\t}\n\n\tfunction toggleBookmarkHighlighting() {\n\t  if (window.is_highlighting_bookmarks) hideBookmarkHighlights();\n\t  else showBookmarkHighlights();\n\n\t  return window.is_highlighting_bookmarks;\n\t}\n\n\tfunction bookmarksVisible() {\n\t  return window.is_highlighting_bookmarks;\n\t}\n\n\tfunction hasBookmarks() {\n\t  const bookmarks = getBookmarks();\n\n\t  return bookmarks.length;\n\t}\n\n\tfunction getBookmarks() {\n\t  return JSON.parse(localStorage.getItem(\"bookmarks\") || \"[]\");\n\t}\n\n\tfunction saveBookmarks(bookmarks) {\n\t  localStorage.setItem(\"bookmarks\", JSON.stringify(bookmarks));\n\n\t  dispatchUpdate();\n\t}\n\n\tconst html$1 = String.raw;\n\n\tclass UsHeaderElement extends HTMLElement {\n\t  get searchBar() {\n\t    return this.querySelector(\"input\");\n\t  }\n\n\t  get searching() {\n\t    return this.classList.contains(\"searching\");\n\t  }\n\n\t  set searching(value) {\n\t    if (value) {\n\t      hideBookmarkHighlights();\n\t      document.body.classList.remove(\"bookmarks-drawer-active\");\n\t      this.classList.add(\"searching\");\n\t      this.searchBar.focus();\n\t      document.addEventListener(\"touchstart\", this.blurSearchIfFocused);\n\t      this.search();\n\t    } else {\n\t      this.classList.remove(\"searching\");\n\t      this.searchBar.blur();\n\t      document.removeEventListener(\"touchstart\", this.blurSearchIfFocused);\n\t      this.dispatchEvent(new CustomEvent(\"search-closed\"));\n\t    }\n\t  }\n\n\t  /**\n\t   * @param {boolean} value\n\t   */\n\t  set bookmarksVisible(value) {\n\t    if (value) {\n\t      this.classList.add(\"bookmarks-visible\");\n\t    } else {\n\t      this.classList.remove(\"bookmarks-visible\");\n\t    }\n\t  }\n\t  /**\n\t   * @param {boolean} value\n\t   */\n\t  set hasBookmarks(value) {\n\t    if (value) {\n\t      this.classList.add(\"has-bookmarks\");\n\t    } else {\n\t      this.classList.remove(\"has-bookmarks\");\n\t    }\n\t  }\n\n\t  get selecting() {\n\t    return this.classList.contains(\"selecting\");\n\t  }\n\n\t  set selecting(value) {\n\t    if (value) {\n\t      this.classList.add(\"selecting\");\n\t    } else {\n\t      this.classList.remove(\"selecting\");\n\t    }\n\t  }\n\n\t  set totalFoundFromSearch(value) {\n\t    this.querySelector(\"#searchTotalNumber\").textContent = value;\n\t    this.currentFoundFromSearch = 1;\n\t  }\n\n\t  get totalFoundFromSearch() {\n\t    return parseInt(this.querySelector(\"#searchTotalNumber\").textContent, 10);\n\t  }\n\n\t  set currentFoundFromSearch(value) {\n\t    if (this.totalFoundFromSearch === 0) value = 0;\n\t    else if (value < 1 || value > this.totalFoundFromSearch) return;\n\n\t    this.querySelector(\"#searchCurrentNumber\").textContent = value;\n\n\t    for (const otherActive of document.querySelectorAll(\"mark.search.active\"))\n\t      otherActive.classList.remove(\"active\");\n\n\t    console.log(\n\t      'document.querySelectorAll(\"mark.search\") :',\n\t      document.querySelectorAll(\"mark.search\").length\n\t    );\n\t    const active = document.querySelectorAll(\"mark.search\")[value - 1];\n\t    if (active) {\n\t      active.classList.add(\"active\");\n\t      seek(active);\n\t    }\n\t  }\n\t  get currentFoundFromSearch() {\n\t    return parseInt(this.querySelector(\"#searchCurrentNumber\").textContent, 10);\n\t  }\n\n\t  constructor() {\n\t    super();\n\n\t    this.hasBookmarks = hasBookmarks();\n\n\t    window.addEventListener(\"bookmark-update\", () => {\n\t      this.hasBookmarks = hasBookmarks();\n\t    });\n\t    window.addEventListener(\"bookmark-visibility-change\", ({ detail }) => {\n\t      console.log(\"udpate;\");\n\t      this.bookmarksVisible = detail;\n\t    });\n\n\t    this.innerHTML = html$1`\n      <button\n        class=\"if-nav-hidden not-when-searching if-bookmarks-not-open\"\n        id=\"toggleNav\"\n        title=\"Menu\"\n      >\n        <svg\n          class=\"if-nav-not-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M4 18h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zm0-5h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1s.45 1 1 1zM3 7c0 .55.45 1 1 1h16c.55 0 1-.45 1-1s-.45-1-1-1H4c-.55 0-1 .45-1 1z\"\n          />\n        </svg>\n        <svg\n          class=\"if-nav-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z\"\n          />\n        </svg>\n      </button>\n      <button\n        class=\"if-nav-not-open if-selection\"\n        id=\"saveBookmark\"\n        title=\"Bookmark\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M19.65 9.04l-4.84-.42-1.89-4.45c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08l4.15-2.5 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.73 3.67-3.18c.67-.58.32-1.68-.56-1.75zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z\"\n          />\n        </svg>\n      </button>\n      <button\n        class=\"not-when-searching if-bookmarks\"\n        id=\"toggleBookmarks\"\n        title=\"Toggle bookmarks\"\n      >\n        <svg\n          class=\"if-bookmarks-not-visible if-nav-not-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z\"\n          />\n        </svg>\n        <svg\n          class=\"if-bookmarks-visible if-nav-not-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2zm0 15l-5-2.18L7 18V6c0-.55.45-1 1-1h8c.55 0 1 .45 1 1v12z\"\n          />\n        </svg>\n      </button>\n\n      <button\n        class=\"if-nav-not-open not-when-searching\"\n        id=\"viewBookmarks\"\n        title=\"Bookmark\"\n      >\n        <svg\n          class=\"if-bookmarks-not-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z\"\n          />\n        </svg>\n\n        <svg\n          class=\"if-bookmarks-open\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M17.5 4.5c-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5-1.45 0-2.99.22-4.28.79C1.49 5.62 1 6.33 1 7.14v11.28c0 1.3 1.22 2.26 2.48 1.94.98-.25 2.02-.36 3.02-.36 1.56 0 3.22.26 4.56.92.6.3 1.28.3 1.87 0 1.34-.67 3-.92 4.56-.92 1 0 2.04.11 3.02.36 1.26.33 2.48-.63 2.48-1.94V7.14c0-.81-.49-1.52-1.22-1.85-1.28-.57-2.82-.79-4.27-.79zM21 17.23c0 .63-.58 1.09-1.2.98-.75-.14-1.53-.2-2.3-.2-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5.92 0 1.83.09 2.7.28.46.1.8.51.8.98v9.47z\"\n          />\n        </svg>\n      </button>\n\n      <div class=\"search-container\">\n        <input type=\"text\" placeholder=\"Search...\" />\n        <div class=\"search-controls\">\n          <button id=\"searchBackward\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n              <path\n                fill=\"currentColor\"\n                d=\"M14.71 6.71c-.39-.39-1.02-.39-1.41 0L8.71 11.3c-.39.39-.39 1.02 0 1.41l4.59 4.59c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L10.83 12l3.88-3.88c.39-.39.38-1.03 0-1.41z\"\n              />\n            </svg>\n          </button>\n          <div class=\"count\">\n            <span id=\"searchCurrentNumber\">0</span>\n            /\n            <span id=\"searchTotalNumber\">0</span>\n          </div>\n\n          <button id=\"searchForward\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n              <path\n                fill=\"currentColor\"\n                d=\"M9.29 6.71c-.39.39-.39 1.02 0 1.41L13.17 12l-3.88 3.88c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l4.59-4.59c.39-.39.39-1.02 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n      <button class=\"if-nav-not-open\" title=\"Search\">\n        <svg\n          class=\"not-when-searching\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M15.5 14h-.79l-.28-.27c1.2-1.4 1.82-3.31 1.48-5.34-.47-2.78-2.79-5-5.59-5.34-4.23-.52-7.79 3.04-7.27 7.27.34 2.8 2.56 5.12 5.34 5.59 2.03.34 3.94-.28 5.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n          />\n        </svg>\n\n        <svg\n          class=\"when-searching\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n        >\n          <path fill=\"none\" d=\"M0 0h24v24H0V0z\" />\n          <path\n            fill=\"currentColor\"\n            d=\"M18.3 5.71c-.39-.39-1.02-.39-1.41 0L12 10.59 7.11 5.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z\"\n          />\n        </svg>\n      </button>\n    `;\n\n\t    this.marker = new mark(document.querySelector(\"us-constitution main\"));\n\n\t    this.toggle = this.toggle.bind(this);\n\t    this.search = this.search.bind(this);\n\t    this.handleClick = this.handleClick.bind(this);\n\t    this.detectSelection = this.detectSelection.bind(this);\n\t    this.blurSearchIfFocused = this.blurSearchIfFocused.bind(this);\n\t  }\n\n\t  connectedCallback() {\n\t    this.querySelector(\"button[title=Search]\").addEventListener(\n\t      \"click\",\n\t      this.toggle\n\t    );\n\t    this.searchBar.addEventListener(\"input\", this.search);\n\n\t    this.addEventListener(\n\t      \"search-update\",\n\t      e => (this.totalFoundFromSearch = e.detail)\n\t    );\n\n\t    this.addEventListener(\"search-closed\", () => this.clearHighlight());\n\n\t    this.addEventListener(\"click\", this.handleClick);\n\n\t    const bookmarkSaveButton = this.querySelector(\"#saveBookmark\");\n\t    bookmarkSaveButton.addEventListener(\"mousedown\", () => this.saveBookmark());\n\t    bookmarkSaveButton.addEventListener(\"touchstart\", () =>\n\t      this.saveBookmark()\n\t    );\n\n\t    document.addEventListener(\"mouseup\", this.detectSelection);\n\t    document.addEventListener(\"touchstart\", e => e.preventDefault());\n\t    document.addEventListener(\"touchmove\", e => e.preventDefault());\n\t    document.addEventListener(\"touchcancel\", this.detectSelection);\n\t    document.addEventListener(\"touchend\", this.detectSelection);\n\t    document.addEventListener(\"keyup\", this.detectSelection);\n\t  }\n\n\t  blurSearchIfFocused(e) {\n\t    if (e.target === this.searchBar) return;\n\t    this.searchBar.blur();\n\t  }\n\n\t  detectSelection() {\n\t    const selection = window.getSelection();\n\n\t    if (!selection.rangeCount || selection.toString().trim() === \"\") {\n\t      this.selecting = false;\n\t      return;\n\t    }\n\n\t    const range = selection.getRangeAt(0);\n\n\t    const pStart =\n\t      range.startContainer.nodeType === 1\n\t        ? range.startContainer\n\t        : range.startContainer.parentElement;\n\t    const pEnd =\n\t      range.endContainer.nodeType === 1\n\t        ? range.endContainer\n\t        : range.endContainer.parentElement;\n\n\t    if (\n\t      !(\n\t        pStart.closest(\"article\") ||\n\t        pStart.closest(\"#declarationOfIndependence\") ||\n\t        pStart.closest(\".amendments\")\n\t      ) ||\n\t      !(\n\t        pEnd.closest(\"article\") ||\n\t        pEnd.closest(\"#declarationOfIndependence\") ||\n\t        pEnd.closest(\".amendments\")\n\t      )\n\t    ) {\n\t      this.selecting = false;\n\t      return;\n\t    }\n\n\t    this.selecting = true;\n\t    this.lastSelection = selection;\n\t    if (!localStorage.getItem(\"bookmark_toast\")) {\n\t      localStorage.setItem(\"bookmark_toast\", true);\n\t      toast(\"Tip: click the star to save a bookmark\");\n\t    }\n\t  }\n\n\t  saveBookmark() {\n\t    if (!this.selecting) return;\n\n\t    createBookmark(this.lastSelection);\n\n\t    this.lastSelection.empty();\n\t    this.selecting = false;\n\t  }\n\n\t  toggleBookmarkHighlighting() {\n\t    this.bookmarksVisible = toggleBookmarkHighlighting();\n\t  }\n\n\t  handleClick(e) {\n\t    if (e.target.closest(\"#searchForward\")) this.currentFoundFromSearch++;\n\t    else if (e.target.closest(\"#searchBackward\")) this.currentFoundFromSearch--;\n\t    else if (e.target.closest(\"#toggleBookmarks\"))\n\t      this.toggleBookmarkHighlighting();\n\t    else if (e.target.closest(\"#viewBookmarks\"))\n\t      document.body.classList.toggle(\"bookmarks-drawer-active\");\n\t    else if (e.target.closest(\"#toggleNav\"))\n\t      document.body.classList.toggle(\"nav-open\");\n\t  }\n\n\t  toggle(e) {\n\t    this.searching = !this.searching;\n\t  }\n\n\t  highlight(term) {\n\t    this.marker.mark(term, {\n\t      acrossElements: true,\n\t      separateWordSearch: false,\n\t      className: \"search\",\n\t      exclude: [\"h1.usc\"],\n\t      done: total => {\n\t        this.dispatchEvent(\n\t          new CustomEvent(\"search-update\", {\n\t            detail: total\n\t          })\n\t        );\n\t      }\n\t    });\n\t  }\n\n\t  clearHighlight() {\n\t    return new Promise(resolve => {\n\t      this.marker.unmark({\n\t        className: \"search\",\n\t        done() {\n\t          resolve();\n\t        }\n\t      });\n\t      if (this.searchBar.value.length < 2) this.totalFoundFromSearch = 0;\n\t    });\n\t  }\n\n\t  search() {\n\t    if (!this.searching) return;\n\t    if (this._searchTimeout) clearTimeout(this._searchTimeout);\n\n\t    this._searchTimeout = setTimeout(async () => {\n\t      await this.clearHighlight();\n\t      if (this.searchBar.value.length < 2) return;\n\t      requestIdleCallback(() => {\n\t        this.highlight(this.searchBar.value.trim());\n\t      });\n\t    }, 100);\n\t  }\n\t}\n\n\tif (!customElements.get(\"us-header\")) {\n\t  customElements.define(\"us-header\", UsHeaderElement);\n\t}\n\n\tconst dfnPanel = document.createElement(\"div\");\n\tdfnPanel.classList.add(\"dfn-panel\");\n\tdocument.body.appendChild(dfnPanel);\n\n\tdocument.addEventListener(\"click\", e => {\n\t  hide();\n\t});\n\n\tfunction show() {\n\t  dfnPanel.classList.add(\"visible\");\n\t}\n\n\tfunction hide() {\n\t  if (!dfnPanel.classList.contains(\"visible\")) return Promise.resolve();\n\n\t  return new Promise(resolve => {\n\t    dfnPanel.addEventListener(\n\t      \"transitionend\",\n\t      () => {\n\t        dfnPanel.textContent = \"\";\n\t        resolve();\n\t      },\n\t      { once: true }\n\t    );\n\n\t    dfnPanel.classList.remove(\"visible\");\n\t    document\n\t      .querySelectorAll(\".dfn-highlighted\")\n\t      .forEach(el => el.classList.remove(\"dfn-highlighted\"));\n\t  });\n\t}\n\n\tasync function setText(txt) {\n\t  if (dfnPanel.textContent === txt) {\n\t    await hide();\n\t    return false;\n\t  }\n\n\t  await hide();\n\n\t  dfnPanel.textContent = txt;\n\t  show();\n\t  return true;\n\t}\n\n\tconst panel = { setText, hide, show };\n\n\tdocument.addEventListener(\"click\", e => {\n\t  if (typeof e.target.closest !== \"function\") return;\n\n\t  const dfn = e.target.closest(\"us-dfn\");\n\t  if (!dfn) return;\n\n\t  dfn.show();\n\t});\n\n\tclass UsDfnElement extends HTMLElement {\n\t  constructor() {\n\t    super();\n\t  }\n\n\t  connectedCallback() {\n\t    if (!this.explanation) {\n\t      return console.warn(\"Untitiled dfn\", this);\n\t    }\n\t  }\n\n\t  get explanation() {\n\t    return this.dataset.explanation;\n\t  }\n\n\t  async show() {\n\t    const shouldBeVisible = await panel.setText(this.explanation);\n\n\t    document\n\t      .querySelectorAll(\".dfn-highlighted\")\n\t      .forEach(el => el.classList.remove(\"dfn-highlighted\"));\n\n\t    if (shouldBeVisible) this.classList.add(\"dfn-highlighted\");\n\t  }\n\t}\n\n\tif (!customElements.get(\"us-dfn\")) {\n\t  customElements.define(\"us-dfn\", UsDfnElement);\n\t}\n\n\tconst html$2 = String.raw;\n\n\tclass BookmarkPreviewElement extends HTMLElement {\n\t  constructor(bookmark) {\n\t    super();\n\n\t    this.bookmark = bookmark;\n\n\t    this.innerHTML = html$2`\n      <p>${this.truncate(this.bookmark.text)}</p>\n    `;\n\t  }\n\n\t  /**\n\t   * @param {String} text\n\t   */\n\t  truncate(text) {\n\t    if (text.length < 50) return text;\n\t    else return `${text.substr(0, 50)}...`;\n\t  }\n\n\t  delete() {\n\t    hideBookmarkHighlights();\n\n\t    const bookmarks = getBookmarks().filter(\n\t      bookmark => bookmark.time !== this.bookmark.time\n\t    );\n\n\t    saveBookmarks(bookmarks);\n\t  }\n\n\t  scrollToHighlight() {\n\t    hideBookmarkHighlights();\n\t    if (!bookmarksVisible()) showBookmark(this.bookmark);\n\n\t    const mark = document.querySelector(\n\t      `mark.bookmark-highlight[data-id=\"${this.bookmark.time}\"]`\n\t    );\n\n\t    if (document.body.classList.contains(\"bookmarks-drawer-active\"))\n\t      document.body.classList.remove(\"bookmarks-drawer-active\");\n\n\t    if (!mark) {\n\t      toast(\"Can't scroll to bookmark\");\n\t      return;\n\t    }\n\n\t    seek(mark);\n\t  }\n\t}\n\n\tif (!customElements.get(\"bookmark-preview\")) {\n\t  customElements.define(\"bookmark-preview\", BookmarkPreviewElement);\n\t}\n\n\tclass BookmarkManagerElement extends HTMLElement {\n\t  constructor() {\n\t    super();\n\n\t    this.handleClick = this.handleClick.bind(this);\n\n\t    this.buildBookmarksList();\n\t    window.addEventListener(\"storage\", event => {\n\t      if (event.key !== \"bookmark\") return;\n\t      this.buildBookmarksList();\n\t    });\n\n\t    this.addEventListener(\"click\", this.handleClick);\n\n\t    window.addEventListener(\"bookmark-update\", () => this.buildBookmarksList());\n\t  }\n\n\t  destoryBookmarksList() {\n\t    this.querySelectorAll(\"bookmark-preview, p.no-bookmarks\").forEach(\n\t      bookmarkPreview => bookmarkPreview.remove()\n\t    );\n\t  }\n\n\t  buildBookmarksList() {\n\t    console.log(\"building list\");\n\t    this.destoryBookmarksList();\n\n\t    const bookmarks = getBookmarks();\n\n\t    if (!bookmarks.length) {\n\t      this.classList.remove(\"editing\");\n\t      const p = document.createElement(\"p\");\n\t      p.classList.add(\"no-bookmarks\");\n\t      p.innerHTML = \"No Bookmarks.<br>Select some text to add one.\";\n\t      this.appendChild(p);\n\t      return;\n\t    }\n\n\t    for (const bookmark of bookmarks) {\n\t      this.add(bookmark);\n\t    }\n\t  }\n\n\t  add(bookmark) {\n\t    const preview = new BookmarkPreviewElement(bookmark);\n\n\t    this.appendChild(preview);\n\t  }\n\n\t  handleClick(e) {\n\t    if (e.target.closest(\"#bookmarkEdit\")) {\n\t      this.classList.toggle(\"editing\");\n\t      return;\n\t    }\n\n\t    document.body.classList.remove(\"bookmarks-drawer-active\");\n\t    if (e.target.closest(\"bookmark-preview\")) return this.handlePreviewClick(e);\n\t  }\n\n\t  handlePreviewClick(e) {\n\t    const preview = e.target.closest(\"bookmark-preview\");\n\n\t    if (this.classList.contains(\"editing\")) {\n\t      preview.delete();\n\t      this.classList.remove(\"editing\");\n\t    } else preview.scrollToHighlight();\n\t  }\n\t}\n\n\tif (!customElements.get(\"bookmark-manager\")) {\n\t  customElements.define(\"bookmark-manager\", BookmarkManagerElement);\n\t}\n\n\troute(\"/\", () => {\n\t  window.scrollTo({ top: 0, behavior: \"smooth\" });\n\t});\n\n\troute(\"/preamble\", () => {\n\t  seek(document.querySelector(\"#preamble\"));\n\t});\n\troute(\"/declaration-of-independence\", () => {\n\t  seek(document.querySelector(\"#declarationOfIndependence\"));\n\t});\n\troute(\"/bill-of-rights\", () => {\n\t  seek(document.querySelector(\"#billOfRights\"));\n\t});\n\troute(\"/articles-of-confederation\", () => {\n\t  seek(document.querySelector(\"#oldPreamble\"));\n\t});\n\troute(\"/about\", () => {\n\t  seek(document.querySelector(\"#about\"));\n\t});\n\n\troute(\"/article/*\", article => {\n\t  const articleHeading = document.querySelector(`#article${article}`);\n\t  seek(articleHeading);\n\t});\n\n\troute(\"/article/*/*\", (article, sectionNumber) => {\n\t  const articleHeading = document.querySelector(`#article${article}`);\n\n\t  if (!articleHeading) return;\n\n\t  const section = articleHeading\n\t    .closest(\"article\")\n\t    .querySelectorAll(\".section-marker\")[parseInt(sectionNumber, 10) - 1];\n\n\t  seek(section);\n\t});\n\n\troute(\"/amendment/*\", amendment => {\n\t  const amendmentHeading = document.querySelector(`#amendment${amendment}`);\n\t  seek(amendmentHeading);\n\t});\n\n\troute(\"/confederation/*\", article => {\n\t  const articleHeading = document.querySelector(`#oldArticle${article}`);\n\t  seek(articleHeading);\n\t});\n\n\tdocument.querySelector(\"aside\").addEventListener(\"click\", e => {\n\t  document.body.classList.remove(\"nav-open\");\n\t  route.exec();\n\t});\n\n\tif (\"serviceWorker\" in navigator) {\n\t  navigator.serviceWorker\n\t    .register(\"/foundingdocuments/service-worker.js\")\n\t    .then(() => {\n\t      if (!localStorage.getItem(\"offline-prompt\")) {\n\t        toast(\"Available offline\", { label: \"Ok\" }, 10000);\n\t        localStorage.setItem(\"offline-prompt\", true);\n\t      }\n\t    })\n\t    .catch(err => {\n\t      console.log(\"Service worker registration failed: \" + err);\n\t    });\n\t}\n\n\troute.base(\"/foundingdocuments/\");\n\troute.start(true);\n\n}());\n"]}